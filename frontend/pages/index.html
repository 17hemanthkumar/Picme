<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PicMe - Find Your Event Photos Automatically</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #EC4899 100%);
        }
        .transition-smooth {
            transition: all 0.3s ease-in-out;
        }
    </style>

</head>
 <script src="{{ url_for('static', filename='js/qr-scanner.js') }}"></script>
    <script src="{{ url_for('static', filename='js/camera.js') }}"></script>
<body class="bg-gray-50">
    <!-- Minimal Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-indigo-600" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L20 10H28L22 16L24 24L16 20L8 24L10 16L4 10H12L16 2Z"/>
                            <circle cx="16" cy="16" r="6" fill="none" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span class="text-xl font-bold text-indigo-600">PicMe</span>
                    </a>
                </div>
                
                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#features" class="text-gray-700 hover:text-indigo-600 transition-smooth">Features</a>
                    <a href="#how-it-works" class="text-gray-700 hover:text-indigo-600 transition-smooth">How It Works</a>
                    <a href="#pricing" class="text-gray-700 hover:text-indigo-600 transition-smooth">Pricing</a>
                </div>
                
                <!-- User Authentication Buttons -->
                <div class="flex items-center space-x-4">
                    {% if session.get('admin_logged_in') %}
                        <span class="text-amber-600 text-sm font-medium hidden md:block">
                            <i class="fas fa-shield-alt mr-1"></i>Admin: {{ session.get('admin_email') }}
                        </span>
                        <form action="/admin/logout" method="get" class="inline-block">
                            <button type="submit" class="px-4 py-2 rounded-md text-sm font-medium text-amber-700 border border-amber-600 hover:bg-amber-50 transition-colors duration-200">Admin Logout</button>
                        </form>
                    {% elif session.get('logged_in') %}
                        <span class="text-gray-600 text-sm font-medium hidden md:block">Welcome, {{ session.get('user_email') }}</span>
                        <form action="/logout" method="get" class="inline-block">
                            <button type="submit" class="px-4 py-2 rounded-md text-sm font-medium text-red-600 border border-red-600 hover:bg-red-50 transition-colors duration-200">Logout</button>
                        </form>
                    {% else %}
                        <button onclick="openAdminModal()" class="px-4 py-2 rounded-md text-sm font-medium text-amber-600 border border-amber-600 hover:bg-amber-50 transition-smooth">
                            <i class="fas fa-shield-alt mr-1"></i>Admin
                        </button>
                        <button onclick="openUserModal()" class="px-4 py-2 rounded-md text-sm font-medium text-indigo-600 border border-indigo-600 hover:bg-indigo-50 transition-smooth">Login</button>
                        <a href="/signup" class="px-4 py-2 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-smooth">Get Started</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-gradient text-white pt-32 pb-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-6">
                        Never miss a photo <br>of yourself at events
                    </h1>
                    <p class="text-xl text-indigo-100 mb-8 max-w-lg">
                        PicMe uses facial recognition to automatically find all photos taken of you at events and gatherings.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <a href="/signup" class="px-8 py-4 rounded-lg bg-white text-indigo-600 hover:bg-gray-100 text-center font-medium transition-smooth text-lg">
                            Get Started - It's Free
                        </a>
                        <a href="#how-it-works" class="px-8 py-4 rounded-lg border-2 border-white text-white hover:bg-white/10 text-center font-medium transition-smooth text-lg">
                            How It Works
                        </a>
                    </div>
                    <div class="mt-8 flex items-center">
                        <div class="flex -space-x-2">
                            <img src="https://randomuser.me/api/portraits/women/12.jpg" class="w-10 h-10 rounded-full border-2 border-white" alt="User">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" class="w-10 h-10 rounded-full border-2 border-white" alt="User">
                            <img src="https://randomuser.me/api/portraits/women/45.jpg" class="w-10 h-10 rounded-full border-2 border-white" alt="User">
                            <img src="https://randomuser.me/api/portraits/men/76.jpg" class="w-10 h-10 rounded-full border-2 border-white" alt="User">
                        </div>
                        <p class="ml-4 text-indigo-100">Join 10,000+ happy users</p>
                    </div>
                </div>
                <div class="relative">
                    <div id="hero-event-carousel" class="relative rounded-2xl overflow-hidden shadow-2xl h-96">
                        <!-- Event carousel will be loaded here -->
                        <div class="absolute inset-0 flex items-center justify-center bg-gray-200">
                            <p class="text-gray-500">Loading events...</p>
                        </div>
                    </div>
                    <!-- Carousel indicators -->
                    <div id="hero-carousel-indicators" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10">
                        <!-- Indicators will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Clients Logo Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-center text-gray-500 mb-8">Trusted by event organizers worldwide</p>
            <div class="grid grid-cols-2 md:grid-cols-5 gap-8 items-center justify-center">
                <img src="https://via.placeholder.com/150x60?text=EventPro" alt="EventPro" class="h-12 w-auto mx-auto opacity-70 hover:opacity-100 transition-smooth">
                <img src="https://via.placeholder.com/150x60?text=LiveNation" alt="LiveNation" class="h-10 w-auto mx-auto opacity-70 hover:opacity-100 transition-smooth">
                <img src="https://via.placeholder.com/150x60?text=Festival+" alt="Festival+" class="h-14 w-auto mx-auto opacity-70 hover:opacity-100 transition-smooth">
                <img src="https://via.placeholder.com/150x60?text=TechConf" alt="TechConf" class="h-8 w-auto mx-auto opacity-70 hover:opacity-100 transition-smooth">
                <img src="https://via.placeholder.com/150x60?text=WeddingCo" alt="WeddingCo" class="h-12 w-auto mx-auto opacity-70 hover:opacity-100 transition-smooth">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Why Use PicMe?</h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                The easiest way to find all photos taken of you at any event
            </p>
        </div>
        
        <div class="grid md:grid-cols-3 gap-12">
            <div class="bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-smooth">
                <div class="w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mb-6">
                    <i class="fas fa-bolt text-indigo-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Instant Discovery</h3>
                <p class="text-gray-600">
                    Our facial recognition scans thousands of event photos in seconds to find every picture of you.
                </p>
            </div>
            
            <div class="bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-smooth">
                <div class="w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mb-6">
                    <i class="fas fa-shield-alt text-indigo-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Privacy Focused</h3>
                <p class="text-gray-600">
                    We don't store your actual photos, just a secure biometric signature to match with event photos.
                </p>
            </div>
            
            <div class="bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-smooth">
                <div class="w-14 h-14 bg-indigo-100 rounded-xl flex items-center justify-center mb-6">
                    <i class="fas fa-calendar-check text-indigo-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Event Integration</h3>
                <p class="text-gray-600">
                    Works with hundreds of events worldwide from music festivals to conferences and weddings.
                </p>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">How PicMe Works</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Three simple steps to find all your event photos
                </p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="relative">
                    <div class="bg-white p-8 rounded-xl shadow-sm h-full">
                        <div class="absolute -top-4 -left-4 w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold">1</div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Create Your Profile</h3>
                        <p class="text-gray-600 mb-6">
                            Sign up and create your secure biometric profile with a quick face scan.
                        </p>
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80" 
                             alt="Happy user" 
                             class="rounded-lg w-full h-48 object-cover">
                    </div>
                </div>
                
                <div class="relative">
                    <div class="bg-white p-8 rounded-xl shadow-sm h-full">
                        <div class="absolute -top-4 -left-4 w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold">2</div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Find Events</h3>
                        <p class="text-gray-600 mb-6">
                            Browse events you've attended or let us notify you when new photos are available.
                        </p>
                        <img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" 
                             alt="Concert event" 
                             class="rounded-lg w-full h-48 object-cover">
                    </div>
                </div>
                
                <div class="relative">
                    <div class="bg-white p-8 rounded-xl shadow-sm h-full">
                        <div class="absolute -top-4 -left-4 w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold">3</div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Discover & Download</h3>
                        <p class="text-gray-600 mb-6">
                            View all photos of you in one place, download high-quality versions, and share.
                        </p>
                        <img src="https://images.unsplash.com/photo-1527529482837-4698179dc6ce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" 
                             alt="Photos on phone" 
                             class="rounded-lg w-full h-48 object-cover">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-20 hero-gradient text-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">Ready to Find Your Event Photos?</h2>
            <p class="text-xl text-indigo-100 mb-8 max-w-3xl mx-auto">
                Join thousands of users who never miss a great photo of themselves at events
            </p>
            <a href="/signup" class="inline-block px-8 py-4 rounded-lg bg-white text-indigo-600 hover:bg-gray-100 font-medium text-lg transition-smooth">
                Get Started Free
            </a>
            <p class="mt-4 text-indigo-100">No credit card required</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-8">
            <div>
                <h3 class="text-lg font-semibold mb-4">PicMe</h3>
                <ul class="space-y-2">
                    <li><a href="about.html" class="text-gray-400 hover:text-white">About Us</a></li>
                    <li><a href="careers.html" class="text-gray-400 hover:text-white">Careers</a></li>
                    <li><a href="press.html" class="text-gray-400 hover:text-white">Press</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Features</h3>
                <ul class="space-y-2">
                    <li><a href="/biometric_authentication_portal" class="text-gray-400 hover:text-white">Face Recognition</a></li>
                    <li><a href="/event_discovery" class="text-gray-400 hover:text-white">Event Discovery</a></li>
                    <li><a href="/download_center" class="text-gray-400 hover:text-white">Photo Downloads</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Resources</h3>
                <ul class="space-y-2">
                    <li><a href="help.html" class="text-gray-400 hover:text-white">Help Center</a></li>
                    <li><a href="privacy.html" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
                    <li><a href="terms.html" class="text-gray-400 hover:text-white">Terms of Service</a></li>
                </ul>
            </div>
            
            <div>
                <h3 class="text-lg font-semibold mb-4">Connect</h3>
                <div class="flex space-x-4 mb-4">
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <p class="text-gray-400 text-sm">
                    © 2023 PicMe, Inc. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- User Login Modal -->
    <div id="userLoginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" onclick="closeUserModal(event)">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">User Login</h2>
                <button onclick="closeUserModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="userLoginForm" onsubmit="handleUserLogin(event)">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
                    <input type="email" id="userEmail" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                    <input type="password" id="userPassword" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                </div>
                
                <div id="userLoginError" class="mb-4 text-red-600 text-sm hidden"></div>
                
                <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-smooth font-medium">
                    Login
                </button>
                
                <p class="mt-4 text-center text-gray-600 text-sm">
                    Don't have an account? <a href="/signup" class="text-indigo-600 hover:text-indigo-700 font-medium">Sign up</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Admin Login/Signup Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" onclick="closeAdminModal(event)">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-shield-alt text-amber-600 mr-2"></i>
                    <span id="adminModalTitle">Admin Login</span>
                </h2>
                <button onclick="closeAdminModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- Admin Login Form -->
            <form id="adminLoginForm" onsubmit="handleAdminLogin(event)" class="admin-form">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
                    <input type="email" id="adminLoginEmail" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                    <input type="password" id="adminLoginPassword" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div id="adminLoginError" class="mb-4 text-red-600 text-sm hidden"></div>
                
                <button type="submit" class="w-full bg-amber-600 text-white py-3 rounded-lg hover:bg-amber-700 transition-smooth font-medium">
                    Admin Login
                </button>
                
                <p class="mt-4 text-center text-gray-600 text-sm">
                    Don't have an admin account? <button type="button" onclick="showAdminSignup()" class="text-amber-600 hover:text-amber-700 font-medium">Sign up</button>
                </p>
            </form>

            <!-- Admin Signup Form -->
            <form id="adminSignupForm" onsubmit="handleAdminSignup(event)" class="admin-form hidden">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Organization Name</label>
                    <input type="text" id="adminOrgName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
                    <input type="email" id="adminSignupEmail" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                    <input type="password" id="adminSignupPassword" required minlength="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-medium mb-2">Confirm Password</label>
                    <input type="password" id="adminConfirmPassword" required minlength="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                
                <div id="adminSignupError" class="mb-4 text-red-600 text-sm hidden"></div>
                
                <button type="submit" class="w-full bg-amber-600 text-white py-3 rounded-lg hover:bg-amber-700 transition-smooth font-medium">
                    Create Admin Account
                </button>
                
                <p class="mt-4 text-center text-gray-600 text-sm">
                    Already have an account? <button type="button" onclick="showAdminLogin()" class="text-amber-600 hover:text-amber-700 font-medium">Login</button>
                </p>
            </form>
        </div>
    </div>

    <script>
        // User Login Modal Functions
        function openUserModal() {
            document.getElementById('userLoginModal').classList.remove('hidden');
            document.getElementById('userLoginModal').classList.add('flex');
        }

        function closeUserModal(event) {
            if (!event || event.target.id === 'userLoginModal') {
                document.getElementById('userLoginModal').classList.add('hidden');
                document.getElementById('userLoginModal').classList.remove('flex');
                document.getElementById('userLoginError').classList.add('hidden');
            }
        }

        function handleUserLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('userEmail').value;
            const password = document.getElementById('userPassword').value;
            
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = data.redirect;
                } else {
                    document.getElementById('userLoginError').textContent = data.error || 'Login failed';
                    document.getElementById('userLoginError').classList.remove('hidden');
                }
            })
            .catch(error => {
                document.getElementById('userLoginError').textContent = 'An error occurred. Please try again.';
                document.getElementById('userLoginError').classList.remove('hidden');
            });
        }

        // Admin Modal Functions
        function openAdminModal() {
            document.getElementById('adminModal').classList.remove('hidden');
            document.getElementById('adminModal').classList.add('flex');
            showAdminLogin();
        }

        function closeAdminModal(event) {
            if (!event || event.target.id === 'adminModal') {
                document.getElementById('adminModal').classList.add('hidden');
                document.getElementById('adminModal').classList.remove('flex');
                document.getElementById('adminLoginError').classList.add('hidden');
                document.getElementById('adminSignupError').classList.add('hidden');
            }
        }

        function showAdminLogin() {
            document.getElementById('adminModalTitle').textContent = 'Admin Login';
            document.getElementById('adminLoginForm').classList.remove('hidden');
            document.getElementById('adminSignupForm').classList.add('hidden');
            document.getElementById('adminLoginError').classList.add('hidden');
            document.getElementById('adminSignupError').classList.add('hidden');
        }

        function showAdminSignup() {
            document.getElementById('adminModalTitle').textContent = 'Admin Signup';
            document.getElementById('adminLoginForm').classList.add('hidden');
            document.getElementById('adminSignupForm').classList.remove('hidden');
            document.getElementById('adminLoginError').classList.add('hidden');
            document.getElementById('adminSignupError').classList.add('hidden');
        }

        function handleAdminLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('adminLoginEmail').value;
            const password = document.getElementById('adminLoginPassword').value;
            
            fetch('/admin/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = data.redirect || '/event_organizer';
                } else {
                    document.getElementById('adminLoginError').textContent = data.message || 'Login failed';
                    document.getElementById('adminLoginError').classList.remove('hidden');
                }
            })
            .catch(error => {
                document.getElementById('adminLoginError').textContent = 'An error occurred. Please try again.';
                document.getElementById('adminLoginError').classList.remove('hidden');
            });
        }

        function handleAdminSignup(event) {
            event.preventDefault();
            
            const organizationName = document.getElementById('adminOrgName').value;
            const email = document.getElementById('adminSignupEmail').value;
            const password = document.getElementById('adminSignupPassword').value;
            const confirmPassword = document.getElementById('adminConfirmPassword').value;
            
            // Validate passwords match
            if (password !== confirmPassword) {
                document.getElementById('adminSignupError').textContent = 'Passwords do not match!';
                document.getElementById('adminSignupError').classList.remove('hidden');
                return;
            }
            
            fetch('/admin/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ organizationName, email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Admin account created successfully! Please login.');
                    showAdminLogin();
                } else {
                    document.getElementById('adminSignupError').textContent = data.error || 'Signup failed';
                    document.getElementById('adminSignupError').classList.remove('hidden');
                }
            })
            .catch(error => {
                document.getElementById('adminSignupError').textContent = 'An error occurred. Please try again.';
                document.getElementById('adminSignupError').classList.remove('hidden');
            });
        }

        // Close modals on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeUserModal();
                closeAdminModal();
            }
        });

        // Hero Event Carousel
        let heroEvents = [];
        let currentSlide = 0;
        let carouselInterval;

        function initHeroEventCarousel(events) {
            const carousel = document.getElementById('hero-event-carousel');
            const indicators = document.getElementById('hero-carousel-indicators');
            
            if (events.length === 0) {
                carousel.innerHTML = `
                    <div class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-indigo-500 to-purple-600">
                        <div class="text-center text-white p-6">
                            <h3 class="text-2xl font-bold mb-2">No Events Yet</h3>
                            <p class="text-indigo-100">Check back soon for upcoming events!</p>
                        </div>
                    </div>
                `;
                return;
            }

            heroEvents = events.slice(-5).reverse(); // Get up to 5 most recent events
            
            // Create slides
            carousel.innerHTML = heroEvents.map((event, index) => {
                const eventDate = new Date(event.date).toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
                
                return `
                    <div class="carousel-slide absolute inset-0 transition-opacity duration-1000 ${index === 0 ? 'opacity-100' : 'opacity-0'}" data-slide="${index}">
                        <img src="${event.image || 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1180'}" 
                             alt="${event.name}" 
                             class="w-full h-full object-cover"
                             onerror="this.src='https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=1180'">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-6 text-white">
                            <p class="text-sm font-medium">${event.category || 'Event'} • ${eventDate}</p>
                            <h3 class="text-2xl font-bold mb-1">${event.name}</h3>
                            <p class="text-sm mb-3">${event.photos_count || 0} photos available</p>
                        </div>
                        <div class="absolute top-4 right-4 bg-white/90 px-3 py-1 rounded-full text-sm font-medium text-gray-900 shadow-sm">
                            <i class="fas fa-images mr-1"></i> ${event.photos_count || 0} photos
                        </div>
                    </div>
                `;
            }).join('');
            
            // Create indicators
            if (heroEvents.length > 1) {
                indicators.innerHTML = heroEvents.map((_, index) => `
                    <button class="carousel-indicator w-2 h-2 rounded-full transition-all duration-300 ${index === 0 ? 'bg-white w-8' : 'bg-white/50'}" 
                            data-slide="${index}"
                            onclick="goToHeroSlide(${index})"></button>
                `).join('');
                
                // Start auto-rotation
                startHeroCarousel();
            }
        }

        function goToHeroSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('.carousel-indicator');
            
            if (slides.length === 0) return;
            
            // Hide current slide
            slides[currentSlide].classList.remove('opacity-100');
            slides[currentSlide].classList.add('opacity-0');
            indicators[currentSlide].classList.remove('bg-white', 'w-8');
            indicators[currentSlide].classList.add('bg-white/50');
            
            // Show new slide
            currentSlide = index;
            slides[currentSlide].classList.remove('opacity-0');
            slides[currentSlide].classList.add('opacity-100');
            indicators[currentSlide].classList.remove('bg-white/50');
            indicators[currentSlide].classList.add('bg-white', 'w-8');
            
            // Reset interval
            if (carouselInterval) {
                clearInterval(carouselInterval);
                startHeroCarousel();
            }
        }

        function startHeroCarousel() {
            carouselInterval = setInterval(() => {
                const nextSlide = (currentSlide + 1) % heroEvents.length;
                goToHeroSlide(nextSlide);
            }, 5000); // Change slide every 5 seconds
        }

        // Load events and initialize carousel on page load
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/events')
                .then(response => response.json())
                .then(events => {
                    initHeroEventCarousel(events);
                })
                .catch(error => {
                    console.error('Error loading hero carousel:', error);
                    document.getElementById('hero-event-carousel').innerHTML = `
                        <div class="absolute inset-0 flex items-center justify-center bg-gray-200">
                            <p class="text-gray-500">Failed to load events</p>
                        </div>
                    `;
                });
        });
    </script>
</body>
</html>
